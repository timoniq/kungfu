import typing

from kungfu.library.monad.result import Result

class Sum[*Ts]:
    __match_args__: typing.ClassVar[tuple[typing.Literal["_value"]]]
    _value: typing.Any
    def __new__[T](cls: type[Sum[*tuple[T, ...]]], value: T, /) -> Sum[*Ts]: ...
    def __getitem__[T](self, __type: type[T]) -> Result[T, str]: ...
    @property
    def v[T](self: Sum[*tuple[T, ...]]) -> T: ...
    @staticmethod
    def get_args() -> tuple[typing.Any, ...]: ...
    @typing.overload
    def only[T, P](self: Sum[T, *tuple[P, ...]]) -> Result[T, str]: ...
    @typing.overload
    def only[T](self, t: type[T]) -> Result[T, str]:
        # Probably there is not way for a better typing until T cannot be bound to Ts or intersection typehint is implemented
        ...
    def detach[Head, *Tail](self: Sum[Head, *Tail]) -> Result[Sum[*Tail], str]: ...
